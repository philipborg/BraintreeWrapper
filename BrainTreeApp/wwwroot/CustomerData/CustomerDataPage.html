<template>
    <template id="payment-informations" is="dom-bind">
        <div>
            <div class="form-group">
                <h4>PAYMENT DETAILS - CREDIT CARD</h4>
                <div id="erros">
                    <template is="dom-repeat" items="{{model.Errors}}">
                        <div style="color:#ff0000;font-weight:bold;">Error: <span>{{item.Error}}</span></div>
                    </template>
                </div>
                <div id="success">
                    <template is="dom-if" if="{{model.Success}}" r restamp>
                        <div style="color:#0A3200;font-weight:bold;">Success: <span>{{model.Success}}</span></div>
                    </template>
                </div>
            </div>
            <hr />
            <div id="payment-data">
                <div id="payment-data">
                    <div class="form-group">
                        <label for="credit-card-information" style="text-transform: uppercase;">
                            <i class="pull-left glyphicon glyphicon-shopping-cart" style="margin-right:5px;padding-top:3px;"></i>
                            <strong>
                                Payment amount:
                            </strong>
                        </label>
                        <label for="credit-card-information">{{model.Amount}}</label>
                        <a href="/basket">for <span>{{model.TotalPayableItems}}</span> items</a>
                    </div>
                </div>

            </div>
            <hr />
            <div class="col-lg-6">
                <div id="customer-data">
                    <div class="form-group">
                        <label for="customer-information" style="text-transform: uppercase;">
                            <i class="pull-left glyphicon glyphicon-user" style="margin-right:5px;padding-top:3px;"></i>
                            <strong>
                                Customer information:
                            </strong>
                        </label>
                    </div>
                    <div class$="{{addErrorClass('form-group', model.CustomerErrors.FirstName)}}">
                        <label class="control-label" for="first-name">First name:</label>
                        <input type="text" class="form-control" id="first-name" aria-describedby="first-name" value="{{model.Customer.FirstName$::input}}">
                    </div>
                    <div class$="{{addErrorClass('form-group', model.CustomerErrors.LastName)}}">
                        <label class="control-label" for="last-name">Last name:</label>
                        <input type="text" class="form-control" id="last-name" aria-describedby="last-name" value="{{model.Customer.LastName$::input}}">
                    </div>
                    <div class$="{{addErrorClass('form-group', model.CustomerErrors.Phone)}}">
                        <label class="control-label" for="phone-number">Phone number:</label>
                        <input type="text" class="form-control" id="phone-number" aria-describedby="phone-number" value="{{model.Customer.Phone$::input}}">
                    </div>
                    <div class$="{{addErrorClass('form-group', model.CustomerErrors.Email)}}">
                        <label class="control-label" for="email">E-mail:</label>
                        <input type="text" class="form-control" id="email" aria-describedby="email" value="{{model.Customer.Email$::input}}">
                    </div>
                </div>
                <div id="billing-address-data">
                    <div id="customer-data">
                        <div class="form-group">
                            <label for="customer-information" style="text-transform: uppercase;">
                                <i class="pull-left glyphicon glyphicon-home" style="margin-right:5px;padding-top:3px;"></i>
                                <strong>
                                    Billing address:
                                </strong>
                            </label>
                        </div>
                        <div class$="{{addErrorClass('form-group', model.CompanyErrors.CompanyName)}}">
                            <label class="control-label" for="company-name">Company name:</label>
                            <input type="text" class="form-control" id="company-name" aria-describedby="company-name" value="{{model.Company.CompanyName$::input}}">
                        </div>
                        <div class$="{{addErrorClass('form-group', model.AddressErrors.StreetAddress)}}">
                            <label class="control-label" for="address-name">Street address:</label>
                            <input type="text" class="form-control" id="address-name" aria-describedby="address-name" value="{{model.Address.StreetAddress$::input}}">
                        </div>
                        <div class$="{{addErrorClass('form-group', model.AddressErrors.Locality)}}">
                            <label class="control-label" for="city-name">City:</label>
                            <input type="text" class="form-control" id="locality-name" aria-describedby="city-name" value="{{model.Address.Locality$::input}}">
                        </div>
                        <div class$="{{addErrorClass('form-group', model.AddressErrors.Region)}}">
                            <label class="control-label" for="region-number">Region:</label>
                            <input type="text" class="form-control" id="region-number" aria-describedby="region-number" value="{{model.Address.Region$::input}}">
                        </div>
                        <div class$="{{addErrorClass('form-group', model.AddressErrors.PostalCode)}}">>
                            <label class="control-label" for="postal-code">Postal code:</label>
                            <input type="text" class="form-control" id="postal-code" aria-describedby="postal-code" value="{{model.Address.PostalCode$::input}}">
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="country-data">Country:</label>
                            <select onchange="window.chooseContry(event);" id="country-select">
                                <option value="0">--select country</option>
                                <option id="PL" value="POL">Poland</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div id="credit-card-data">
                    <div class="form-group">
                        <label for="credit-card-information" style="text-transform: uppercase;">
                            <i class="pull-left glyphicon glyphicon-credit-card" style="margin-right:5px;padding-top:3px;"></i>
                            <strong>
                                Credit card information:
                            </strong>
                        </label>
                    </div>
                    <div class$="{{addErrorClass('form-group', model.CreditCardErrors.CardNumber)}}">>
                        <label class="control-label" for="card-number">Card number:</label>
                        <input type="text" class="form-control" id="card-number" aria-describedby="card-number" value="{{model.CreditCard.CardNumber$::input}}" placeholder="testing card is 4111111111111111">
                    </div>
                    <!--<div class="form-group">
                        <label class="control-label" for="phone-number">Exirance date:</label>
                        <input type="text" class="form-control" id="phone-number" aria-describedby="phone-number">
                        <span class="form-control" aria-hidden="true"></span>
                        <span id="phone-number" class="sr-only">(error)</span>
                    </div>-->
                    <div class="form-group">
                        <label for="customer-information">
                            Expiry date:
                        </label>
                    </div>
                    <div>
                        <div class="form-group col-lg-5">
                            <select id="card-expiry-month" onchange="window.chooseExpiryMonth(event);">
                                <option value="0">-- select month</option>
                                <option value="01">01</option>
                                <option value="02" selected="selected">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                                <option value="06">06</option>
                                <option value="07">07</option>
                                <option value="08">08</option>
                                <option value="09">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <div class="form-group col-lg-1">
                            <label>/</label>
                        </div>
                        <div class="form-group col-lg-5">
                            <select id="card-expiry-year" onchange="window.chooseExpiryDate(event);">
                                <option value="0">-- select year</option>
                                <option value="2016">2016</option>
                                <option value="2017" selected="selected">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                                <option value="2020">2020</option>
                                <option value="2021">2021</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                                <option value="2026">2026</option>
                                <option value="2027">2027</option>
                            </select>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class$="{{addErrorClass('form-group', model.CreditCardErrors.SecurityNumber)}}">
                        <label class="control-label" for="security-number">Security number:</label>
                        <input type="text" class="form-control" id="security-number" aria-describedby="security-number" value="{{model.CreditCard.SecurityNumber$::input}}" placeholder="CVV is 123">
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            <hr />
            <div class="pull-right">
                <button class="btn btn-default" type="submit" value="{{model.Pay$::click}}" onclick="++this.value">Pay</button>
            </div>
        </div>
        <dom-bind-notifier path="model" observed-object="{{model}}" deep></dom-bind-notifier>
    </template>
    <script>
        var payableItems = document.querySelector('#payment-informations');

        payableItems.addErrorClass = function(basic, error)
        {
            return basic + ' ' + error;
        }

        function chooseExpiryMonth(month) {
            payableItems.model.CreditCard.ExpiryMonth$ = month.target.value;
        }

        function chooseExpiryDate(year) {
            payableItems.model.CreditCard.ExpiryYear$ = year.target.value;
        }

        function chooseContry(country) {
            var element = document.getElementById('country-select');
            payableItems.model.Address.CountryName$ = element.options[element.selectedIndex].text;
            payableItems.model.Address.CountryCodeAlpha2$ = element.options[element.selectedIndex].id;
            payableItems.model.Address.CountryCodeAlpha3$ = country.target.value;
        }
    </script>
</template>
